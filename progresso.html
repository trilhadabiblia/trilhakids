<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Meu Progresso - Trilho Kids</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 min-h-screen font-sans text-gray-100">

  <!-- Header -->
  <header class="bg-gradient-to-r from-violet-600 to-purple-600 backdrop-blur-xl border-b border-purple-400/30 sticky top-0 z-20 shadow-2xl">
    <div class="max-w-7xl mx-auto px-4 py-6">
      <div class="text-center">
        <h1 class="text-4xl font-black text-white drop-shadow-lg mb-2">ğŸ† MEU PROGRESSO</h1>
        <p class="text-purple-100">Acompanhe sua jornada no Trilho Kids!</p>
      </div>
    </div>
  </header>

  <main class="max-w-7xl mx-auto px-4 py-12">
    
    <!-- Stats Principais -->
    <section class="grid md:grid-cols-4 gap-6 mb-12">
      <div class="bg-gradient-to-br from-yellow-500 to-amber-500 rounded-2xl p-6 text-center shadow-2xl">
        <div class="text-5xl mb-3">â­</div>
        <div class="text-4xl font-black text-white mb-2" id="stat-pontos">0</div>
        <p class="text-yellow-100 font-semibold">Pontos</p>
      </div>
      <div class="bg-gradient-to-br from-purple-500 to-pink-500 rounded-2xl p-6 text-center shadow-2xl">
        <div class="text-5xl mb-3">ğŸ–ï¸</div>
        <div class="text-4xl font-black text-white mb-2" id="stat-nivel">1</div>
        <p class="text-purple-100 font-semibold" id="stat-nome-nivel">Iniciante</p>
      </div>
      <div class="bg-gradient-to-br from-blue-500 to-cyan-500 rounded-2xl p-6 text-center shadow-2xl">
        <div class="text-5xl mb-3">ğŸ“š</div>
        <div class="text-4xl font-black text-white mb-2" id="stat-livros">0</div>
        <p class="text-blue-100 font-semibold">Livros Visitados</p>
      </div>
      <div class="bg-gradient-to-br from-green-500 to-emerald-500 rounded-2xl p-6 text-center shadow-2xl">
        <div class="text-5xl mb-3">ğŸ…</div>
        <div class="text-4xl font-black text-white mb-2" id="stat-badges">0</div>
        <p class="text-green-100 font-semibold">Badges Conquistadas</p>
      </div>
    </section>

    <!-- Progresso para PrÃ³ximo NÃ­vel -->
    <section class="bg-gradient-to-br from-purple-500/10 to-violet-500/10 border border-purple-500/30 rounded-2xl p-8 mb-12">
      <h2 class="text-2xl font-black text-purple-300 mb-6">ğŸ“ˆ Progresso para o PrÃ³ximo NÃ­vel</h2>
      <div class="space-y-4">
        <div class="flex justify-between text-lg">
          <span class="text-gray-300">Pontos Atuais:</span>
          <span class="text-white font-bold" id="pontos-atuais">0</span>
        </div>
        <div class="flex justify-between text-lg">
          <span class="text-gray-300">PrÃ³ximo NÃ­vel:</span>
          <span class="text-white font-bold" id="proximo-nivel-pontos">100</span>
        </div>
        <div class="flex justify-between text-lg">
          <span class="text-gray-300">Faltam:</span>
          <span class="text-yellow-300 font-bold" id="pontos-faltam">100</span>
        </div>
        <div class="w-full bg-gray-700 rounded-full h-6 overflow-hidden">
          <div class="bg-gradient-to-r from-purple-600 to-violet-600 h-full transition-all duration-500" id="barra-progresso-nivel" style="width: 0%"></div>
        </div>
      </div>
    </section>

    <!-- Badges Conquistadas -->
    <section class="mb-12">
      <h2 class="text-3xl font-black text-purple-300 mb-6 text-center">ğŸ… Badges Conquistadas</h2>
      <div id="badges-container" class="grid md:grid-cols-3 lg:grid-cols-4 gap-4">
        <!-- Badges serÃ£o inseridas dinamicamente -->
      </div>
      <p id="sem-badges" class="text-center text-gray-400 mt-8 hidden">
        VocÃª ainda nÃ£o conquistou nenhuma badge. Continue explorando para desbloquear conquistas! ğŸ¯
      </p>
    </section>

    <!-- Atividades Recentes -->
    <section class="mb-12">
      <h2 class="text-3xl font-black text-purple-300 mb-6 text-center">ğŸ“œ Atividades Recentes</h2>
      <div class="bg-gradient-to-br from-slate-800 to-slate-900 border border-purple-500/30 rounded-2xl p-6">
        <div id="historia-container" class="space-y-3 max-h-96 overflow-y-auto">
          <!-- HistÃ³rico serÃ¡ inserido dinamicamente -->
        </div>
        <p id="sem-historia" class="text-center text-gray-400 py-8 hidden">
          Nenhuma atividade registrada ainda. Comece sua jornada! ğŸš€
        </p>
      </div>
    </section>

    <!-- EstatÃ­sticas Detalhadas -->
    <section class="grid md:grid-cols-2 gap-6 mb-12">
      <div class="bg-gradient-to-br from-blue-500/10 to-cyan-500/10 border border-blue-500/30 rounded-2xl p-6">
        <h3 class="text-2xl font-bold text-blue-300 mb-4">âš”ï¸ HerÃ³is Descobertos</h3>
        <div class="text-5xl font-black text-white text-center mb-2" id="stat-herois">0</div>
        <p class="text-center text-gray-300">de 14 JuÃ­zes</p>
        <div class="w-full bg-gray-700 rounded-full h-3 overflow-hidden mt-4">
          <div class="bg-gradient-to-r from-blue-600 to-cyan-600 h-full transition-all duration-500" id="barra-herois" style="width: 0%"></div>
        </div>
      </div>
      <div class="bg-gradient-to-br from-green-500/10 to-emerald-500/10 border border-green-500/30 rounded-2xl p-6">
        <h3 class="text-2xl font-bold text-green-300 mb-4">ğŸ¯ Quizzes Completados</h3>
        <div class="text-5xl font-black text-white text-center mb-2" id="stat-quizzes">0</div>
        <p class="text-center text-gray-300">Desafios ConcluÃ­dos</p>
      </div>
    </section>

    <!-- BotÃ£o Reset -->
    <section class="text-center">
      <button onclick="resetarTudo()" class="bg-gradient-to-r from-red-600 to-rose-600 hover:from-red-700 hover:to-rose-700 text-white px-6 py-3 rounded-lg font-bold transition-all">
        ğŸ”„ Resetar Progresso
      </button>
    </section>

  </main>

  <footer class="bg-gradient-to-r from-slate-800 to-slate-900 border-t border-purple-500/30 p-6 text-center text-gray-400">
    <p class="font-semibold mb-2">Â© 2025 - Trilho Kids</p>
    <p class="text-sm">Continue explorando para desbloquear mais conquistas!</p>
  </footer>

  <script src="../gamificacao.js"></script>
  <script>
    function toggleMenu() {
      const sidebar = document.getElementById('sidebar');
      const overlay = document.getElementById('overlay');
      sidebar.classList.toggle('menu-open');
      sidebar.classList.toggle('menu-closed');
      overlay.classList.toggle('overlay-show');
      overlay.classList.toggle('overlay-hide');
    }

    function resetarTudo() {
      trilhoGame.resetarProgresso();
    }

    // Carregar dados ao abrir a pÃ¡gina
    window.addEventListener('DOMContentLoaded', () => {
      const stats = trilhoGame.getEstatisticas();
      const badges = trilhoGame.getBadges();
      const historia = trilhoGame.getHistoria();

      // Atualizar estatÃ­sticas principais
      document.getElementById('stat-pontos').textContent = stats.pontos;
      document.getElementById('stat-nivel').textContent = stats.nivel;
      document.getElementById('stat-nome-nivel').textContent = stats.nomeNivel;
      document.getElementById('stat-livros').textContent = stats.livrosVisitados;
      document.getElementById('stat-badges').textContent = stats.badges;
      document.getElementById('stat-herois').textContent = stats.heroisVisitados;
      document.getElementById('stat-quizzes').textContent = stats.quizzesCompletos;

      // Progresso para prÃ³ximo nÃ­vel
      document.getElementById('pontos-atuais').textContent = stats.pontos;
      document.getElementById('proximo-nivel-pontos').textContent = stats.proximoNivel.pontos;
      document.getElementById('pontos-faltam').textContent = stats.proximoNivel.faltam;
      
      const percentualNivel = ((stats.pontos / stats.proximoNivel.pontos) * 100).toFixed(0);
      document.getElementById('barra-progresso-nivel').style.width = percentualNivel + '%';

      // Barra de herÃ³is
      const percentualHerois = ((stats.heroisVisitados / 14) * 100).toFixed(0);
      document.getElementById('barra-herois').style.width = percentualHerois + '%';

      // Renderizar badges
      const badgesContainer = document.getElementById('badges-container');
      if (badges.length === 0) {
        document.getElementById('sem-badges').classList.remove('hidden');
      } else {
        badges.forEach(badge => {
          const badgeEl = document.createElement('div');
          badgeEl.className = 'badge-item bg-gradient-to-br from-yellow-500 to-amber-500 rounded-xl p-6 text-center shadow-lg';
          badgeEl.innerHTML = `
            <div class="text-5xl mb-3">${badge.nome.split(' ')[0]}</div>
            <h3 class="font-bold text-white mb-2">${badge.nome.substring(2)}</h3>
            <p class="text-xs text-yellow-100">${badge.descricao || ''}</p>
          `;
          badgesContainer.appendChild(badgeEl);
        });
      }

      // Renderizar histÃ³rico
      const historiaContainer = document.getElementById('historia-container');
      if (historia.length === 0) {
        document.getElementById('sem-historia').classList.remove('hidden');
      } else {
        historia.slice(0, 20).forEach(item => {
          const itemEl = document.createElement('div');
          itemEl.className = 'bg-slate-700/50 rounded-lg p-4 flex items-center gap-4 hover:bg-slate-700 transition-colors';
          
          let icone = 'ğŸ“Œ';
          let texto = '';
          let cor = 'text-gray-300';
          
          if (item.tipo === 'livro') {
            icone = 'ğŸ“–';
            texto = `Visitou o livro: ${item.nome}`;
            cor = 'text-blue-300';
          } else if (item.tipo === 'heroi') {
            icone = 'âš”ï¸';
            texto = `Descobriu o herÃ³i: ${item.nome}`;
            cor = 'text-purple-300';
          } else if (item.tipo === 'quiz') {
            icone = 'ğŸ¯';
            texto = `Quiz ${item.nome}: ${item.acertos}/${item.total} (${item.percentual.toFixed(0)}%)`;
            cor = 'text-green-300';
          } else if (item.tipo === 'pontos') {
            icone = 'â­';
            texto = item.motivo;
            cor = 'text-yellow-300';
          }
          
          const dataFormatada = new Date(item.data).toLocaleString('pt-BR', {
            day: '2-digit',
            month: '2-digit',
            hour: '2-digit',
            minute: '2-digit'
          });
          
          itemEl.innerHTML = `
            <div class="text-3xl flex-shrink-0">${icone}</div>
            <div class="flex-1">
              <p class="${cor} font-semibold">${texto}</p>
              <p class="text-xs text-gray-500 mt-1">${dataFormatada}</p>
            </div>
          `;
          historiaContainer.appendChild(itemEl);
        });
      }
    });
  </script>
  <script src="./gamificacao.js"></script>
  <script src="/menu.js"></script>

</body>
</html>