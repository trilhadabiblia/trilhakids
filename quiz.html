<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Quiz Flashcard - Livros Hist√≥ricos</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .card-flip {
      transform-style: preserve-3d;
      transition: transform 0.6s;
    }
    .card-flip.flipped {
      transform: rotateY(180deg);
    }
    .card-front, .card-back {
      backface-visibility: hidden;
    }
    .card-back {
      transform: rotateY(180deg);
    }
  </style>
</head>
<body class="bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 min-h-screen font-sans text-gray-100">

  <!-- Header -->
  <header class="bg-gradient-to-r from-violet-600 to-purple-600 backdrop-blur-xl border-b border-purple-400/30 sticky top-0 z-20 shadow-2xl">
    <div class="max-w-7xl mx-auto px-4 py-6">
      <div class="text-center">
        <h1 class="text-4xl font-black text-white drop-shadow-lg mb-2">üéØ QUIZ FLASHCARD B√çBLICO</h1>
        <p class="text-purple-100">Teste seus conhecimentos sobre os Livros Hist√≥ricos!</p>
      </div>
    </div>
  </header>

  <!-- Main Content -->
  <main class="max-w-5xl mx-auto px-4 py-12">
    
    <!-- Seletor de Livros -->
    <div class="grid md:grid-cols-4 gap-4 mb-12">
      <button onclick="selecionarLivro('josue')" class="bg-gradient-to-br from-cyan-600 to-blue-600 rounded-xl p-6 text-center hover:shadow-lg hover:shadow-blue-500/30 transition-all duration-300 hover:scale-105 border-4 border-transparent" id="btn-josue">
        <div class="text-4xl mb-3">üìò</div>
        <h3 class="font-bold text-white">Josu√©</h3>
      </button>
      <button onclick="selecionarLivro('juizes')" class="bg-gradient-to-br from-purple-600 to-red-600 rounded-xl p-6 text-center hover:shadow-lg hover:shadow-purple-500/30 transition-all duration-300 hover:scale-105 border-4 border-transparent" id="btn-juizes">
        <div class="text-4xl mb-3">‚öñÔ∏è</div>
        <h3 class="font-bold text-white">Ju√≠zes</h3>
      </button>
      <button onclick="selecionarLivro('rute')" class="bg-gradient-to-br from-amber-600 to-yellow-600 rounded-xl p-6 text-center hover:shadow-lg hover:shadow-yellow-500/30 transition-all duration-300 hover:scale-105 border-4 border-transparent" id="btn-rute">
        <div class="text-4xl mb-3">üåæ</div>
        <h3 class="font-bold text-white">Rute</h3>
      </button>
      <button onclick="selecionarLivro('1samuel')" class="bg-gradient-to-br from-red-600 to-rose-600 rounded-xl p-6 text-center hover:shadow-lg hover:shadow-red-500/30 transition-all duration-300 hover:scale-105 border-4 border-transparent" id="btn-1samuel">
        <div class="text-4xl mb-3">üëë</div>
        <h3 class="font-bold text-white">1 Samuel</h3>
      </button>
    </div>

    <!-- √Årea do Flashcard -->
    <div class="mb-12">
      <div class="text-center mb-6">
        <h2 class="text-3xl font-black text-white" id="titulo-livro">Selecione um livro para come√ßar!</h2>
        <p class="text-gray-300 mt-2" id="progresso">Carta 0 de 0</p>
      </div>

      <!-- Card Flip√°vel -->
      <div class="mb-8 flex justify-center" style="perspective: 1000px;">
        <div class="card-flip w-full max-w-2xl h-96 cursor-pointer relative" id="card" onclick="virarCarta()" style="transform-style: preserve-3d;">
          <!-- Frente -->
          <div class="card-front absolute w-full h-full bg-gradient-to-br from-blue-500 to-cyan-500 rounded-2xl shadow-2xl p-8 flex flex-col justify-center items-center text-center border-4 border-white/20" style="backface-visibility: hidden;">
            <div class="text-6xl mb-6">‚ùì</div>
            <p class="text-white text-2xl font-bold" id="pergunta">Selecione um livro para come√ßar</p>
            <p class="text-blue-100 text-sm mt-6">Clique para ver a resposta</p>
          </div>
          <!-- Verso -->
          <div class="card-back absolute w-full h-full bg-gradient-to-br from-yellow-500 to-amber-500 rounded-2xl shadow-2xl p-8 flex flex-col justify-center items-center text-center border-4 border-white/20" style="backface-visibility: hidden; transform: rotateY(180deg);">
            <div class="text-6xl mb-6">‚úÖ</div>
            <p class="text-white text-2xl font-bold" id="resposta">Resposta</p>
            <p class="text-yellow-100 text-sm mt-6">Clique para voltar</p>
          </div>
        </div>
      </div>

      <!-- Controles de Navega√ß√£o -->
      <div class="flex justify-center gap-4 mb-8">
        <button onclick="cartaAnterior()" class="bg-gradient-to-r from-gray-600 to-gray-700 hover:from-gray-700 hover:to-gray-800 text-white px-8 py-3 rounded-lg font-bold transition-all" id="btn-anterior" disabled>
          ‚¨ÖÔ∏è Anterior
        </button>
        <button onclick="cartaProxima()" class="bg-gradient-to-r from-purple-600 to-violet-600 hover:from-purple-700 hover:to-violet-700 text-white px-8 py-3 rounded-lg font-bold transition-all" id="btn-proxima">
          Pr√≥xima ‚û°Ô∏è
        </button>
      </div>

      <!-- Indicador de Progresso -->
      <div class="w-full bg-gray-700 rounded-full h-3 overflow-hidden">
        <div class="bg-gradient-to-r from-purple-600 to-violet-600 h-full transition-all duration-500" id="barra-progresso" style="width: 0%"></div>
      </div>
    </div>

    <!-- Stats -->
    <div class="grid md:grid-cols-3 gap-6 bg-gradient-to-br from-purple-500/10 to-violet-500/10 border border-purple-500/30 rounded-2xl p-8">
      <div class="text-center">
        <div class="text-5xl font-black text-purple-300 mb-2" id="total-cartas">0</div>
        <p class="text-gray-300">Total de Cartas</p>
      </div>
      <div class="text-center">
        <div class="text-5xl font-black text-blue-300 mb-2" id="cartas-feitas">0</div>
        <p class="text-gray-300">Cartas Estudadas</p>
      </div>
      <div class="text-center">
        <div class="text-5xl font-black text-green-300 mb-2" id="percentual">0%</div>
        <p class="text-gray-300">Progresso</p>
      </div>
    </div>

  </main>

  <!-- Footer -->
  <footer class="bg-gradient-to-r from-slate-800 to-slate-900 border-t border-purple-500/30 p-6 text-center text-gray-400 mt-12">
    <p class="font-semibold mb-2">¬© 2025 - Trilha Hist√≥rica da B√≠blia</p>
    <p class="text-sm">Minist√©rio Infantil - Kids | Quiz Flashcard üéØ</p>
  </footer>

  <script src="./gamificacao.js"></script>
  <script>
    const cartas = {
      josue: [
        {
          pergunta: "Quem foi o l√≠der que substituiu Mois√©s e guiou o povo at√© a Terra Prometida?",
          resposta: "Josu√©."
        },
        {
          pergunta: "Qual cidade caiu depois que o povo marchou em volta dela por sete dias?",
          resposta: "Jeric√≥."
        },
        {
          pergunta: "O que o povo de Israel fez para as muralhas de Jeric√≥ ca√≠rem?",
          resposta: "Marcharam ao redor e tocaram trombetas gritando bem alto!"
        },
        {
          pergunta: "O que o livro de Josu√© nos ensina sobre Deus?",
          resposta: "Que Deus cumpre todas as Suas promessas."
        }
      ],
      juizes: [
        {
          pergunta: "O que eram os \"Ju√≠zes\" na B√≠blia?",
          resposta: "Eram l√≠deres que Deus levantava para ajudar o povo e libert√°-los dos inimigos."
        },
        {
          pergunta: "Qual juiz era muito forte e lutou contra os filisteus?",
          resposta: "Sans√£o."
        },
        {
          pergunta: "Quem usou apenas 300 homens e venceu um ex√©rcito bem maior?",
          resposta: "Gide√£o."
        },
        {
          pergunta: "O que o povo fazia muitas vezes e deixava Deus triste?",
          resposta: "Esquecia de Deus e fazia coisas erradas."
        }
      ],
      rute: [
        {
          pergunta: "Quem era Rute?",
          resposta: "Uma moabita que amava a Deus e seguiu sua sogra Noemi."
        },
        {
          pergunta: "O que Rute disse para Noemi quando ela quis voltar sozinha?",
          resposta: "\"O seu povo ser√° o meu povo, e o seu Deus ser√° o meu Deus.\""
        },
        {
          pergunta: "Quem se casou com Rute e foi muito bondoso com ela?",
          resposta: "Boaz."
        },
        {
          pergunta: "Por que a hist√≥ria de Rute √© importante?",
          resposta: "Porque mostra o amor, a f√© e como Deus cuida de quem confia Nele."
        }
      ],
      "1samuel": [
        {
          pergunta: "Quem foi o menino que ouviu Deus chamando √† noite?",
          resposta: "Samuel."
        },
        {
          pergunta: "Quem foi o primeiro rei de Israel?",
          resposta: "Saul."
        },
        {
          pergunta: "Quem venceu o gigante Golias com uma pedrinha e uma funda?",
          resposta: "Davi."
        },
        {
          pergunta: "O que aprendemos com Davi e Golias?",
          resposta: "Que com f√© em Deus, podemos vencer qualquer gigante."
        }
      ]
    };

    let livroAtual = null;
    let cartaAtual = 0;
    let cartaVirada = false;
    let acertos = 0;
    let cartasRespondidas = new Set();

    const nomes = {
      josue: "üìò Livro de Josu√©",
      juizes: "‚öñÔ∏è Livro de Ju√≠zes",
      rute: "üåæ Livro de Rute",
      "1samuel": "üëë Livro de 1 Samuel"
    };

    const cores = {
      josue: "from-cyan-600 to-blue-600",
      juizes: "from-purple-600 to-red-600",
      rute: "from-amber-600 to-yellow-600",
      "1samuel": "from-red-600 to-rose-600"
    };

    function selecionarLivro(livro) {
      livroAtual = livro;
      cartaAtual = 0;
      cartaVirada = false;
      acertos = 0;
      cartasRespondidas = new Set();
      
      // Remove sele√ß√£o anterior
      document.querySelectorAll('[id^="btn-"]').forEach(btn => {
        btn.classList.remove('border-yellow-400');
      });
      
      // Adiciona sele√ß√£o atual
      document.getElementById(`btn-${livro}`).classList.add('border-yellow-400');
      
      atualizarCarta();
    }

    function atualizarCarta() {
      if (!livroAtual) return;

      const cartasDoLivro = cartas[livroAtual];
      const carta = cartasDoLivro[cartaAtual];

      document.getElementById('titulo-livro').textContent = nomes[livroAtual];
      document.getElementById('pergunta').textContent = carta.pergunta;
      document.getElementById('resposta').textContent = carta.resposta;
      document.getElementById('progresso').textContent = `Carta ${cartaAtual + 1} de ${cartasDoLivro.length}`;
      
      // Atualizar barra de progresso
      const percentual = ((cartaAtual + 1) / cartasDoLivro.length) * 100;
      document.getElementById('barra-progresso').style.width = percentual + '%';
      document.getElementById('total-cartas').textContent = cartasDoLivro.length;
      document.getElementById('cartas-feitas').textContent = cartaAtual + 1;
      document.getElementById('percentual').textContent = Math.round(percentual) + '%';

      // Resetar card
      document.getElementById('card').classList.remove('flipped');
      cartaVirada = false;

      // Habilitar/desabilitar bot√µes
      document.getElementById('btn-anterior').disabled = cartaAtual === 0;
      document.getElementById('btn-proxima').disabled = cartaAtual === cartasDoLivro.length - 1;

      // Atualizar cor do card
      const card = document.getElementById('card');
      const corClass = cores[livroAtual];
      card.querySelector('.card-front').className = `card-front absolute w-full h-full bg-gradient-to-br ${corClass} rounded-2xl shadow-2xl p-8 flex flex-col justify-center items-center text-center border-4 border-white/20`;
    }

    function virarCarta() {
      const card = document.getElementById('card');
      card.classList.toggle('flipped');
      cartaVirada = !cartaVirada;
      
      // Se virou para ver a resposta e ainda n√£o respondeu esta carta
      if (cartaVirada && !cartasRespondidas.has(cartaAtual)) {
        // Mostrar bot√µes de acerto/erro
        mostrarBotoesResposta();
      }
    }

    function mostrarBotoesResposta() {
      if (document.getElementById('btns-resposta')) return; // J√° existe
      
      const container = document.querySelector('.flex.justify-center.gap-4.mb-8');
      const btnsDiv = document.createElement('div');
      btnsDiv.id = 'btns-resposta';
      btnsDiv.className = 'flex justify-center gap-4 mt-4';
      btnsDiv.innerHTML = `
        <button onclick="registrarResposta(true)" class="bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white px-8 py-3 rounded-lg font-bold transition-all">
          ‚úÖ Acertei!
        </button>
        <button onclick="registrarResposta(false)" class="bg-gradient-to-r from-red-600 to-rose-600 hover:from-red-700 hover:to-rose-700 text-white px-8 py-3 rounded-lg font-bold transition-all">
          ‚ùå Errei
        </button>
      `;
      container.parentNode.insertBefore(btnsDiv, container.nextSibling);
    }

    function registrarResposta(acertou) {
      if (cartasRespondidas.has(cartaAtual)) return;
      
      cartasRespondidas.add(cartaAtual);
      if (acertou) acertos++;
      
      // Remover bot√µes
      const btns = document.getElementById('btns-resposta');
      if (btns) btns.remove();
      
      // Se respondeu todas as cartas do livro
      const cartasDoLivro = cartas[livroAtual];
      if (cartasRespondidas.size === cartasDoLivro.length) {
        finalizarQuiz();
      } else {
        // Avan√ßar para pr√≥xima carta automaticamente
        setTimeout(() => {
          if (cartaAtual < cartasDoLivro.length - 1) {
            cartaProxima();
          }
        }, 500);
      }
    }

    function finalizarQuiz() {
      const cartasDoLivro = cartas[livroAtual];
      const total = cartasDoLivro.length;
      
      // Registrar no sistema de gamifica√ß√£o
      trilhoGame.completarQuiz(`Quiz ${nomes[livroAtual]}`, acertos, total);
      
      // Mostrar resultado final
      setTimeout(() => {
        const percentual = Math.round((acertos / total) * 100);
        let mensagem = '';
        let emoji = '';
        
        if (percentual === 100) {
          mensagem = 'PERFEITO! Voc√™ dominou este livro! üèÜ';
          emoji = 'üéâ';
        } else if (percentual >= 75) {
          mensagem = 'Muito bem! Continue assim! üëè';
          emoji = 'üòä';
        } else if (percentual >= 50) {
          mensagem = 'Bom trabalho! Pode melhorar! üí™';
          emoji = 'üôÇ';
        } else {
          mensagem = 'Continue estudando! Voc√™ consegue! üìö';
          emoji = 'üòÖ';
        }
        
        alert(`${emoji}\n\n${mensagem}\n\nAcertos: ${acertos}/${total} (${percentual}%)\n\nSeus pontos foram registrados!`);
        
        // Reset para refazer o quiz
        acertos = 0;
        cartasRespondidas = new Set();
        cartaAtual = 0;
        atualizarCarta();
      }, 500);
    }

    function cartaProxima() {
      if (!livroAtual) return;
      const btns = document.getElementById('btns-resposta');
      if (btns) btns.remove();
      
      if (cartaAtual < cartas[livroAtual].length - 1) {
        cartaAtual++;
        atualizarCarta();
      }
    }

    function cartaAnterior() {
      if (!livroAtual) return;
      const btns = document.getElementById('btns-resposta');
      if (btns) btns.remove();
      
      if (cartaAtual > 0) {
        cartaAtual--;
        atualizarCarta();
      }
    }

    // Teclado
    document.addEventListener('keydown', (e) => {
      if (!livroAtual) return;
      if (e.key === 'ArrowRight') cartaProxima();
      if (e.key === 'ArrowLeft') cartaAnterior();
      if (e.key === ' ') {
        e.preventDefault();
        virarCarta();
      }
    });
  </script>
  <script src="/menu.js"></script>
</body>
</html>